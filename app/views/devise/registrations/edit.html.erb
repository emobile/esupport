<h3>Edit <%= resource_name.to_s.humanize %></h3>

<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %>
  <%= devise_error_messages! %>

  <div class="row-fluid">
    <div class="block span6">
      <a href="#description" class="block-heading" data-toggle="collapse"><%= t(:client_general_info) %></a>
      <div id="description" class="block-body collapse in">
        <br />     
        <div class="control-group">
          <%= f.label :first_name, :class => 'control-label' %>
          <div class="controls">
            <%= f.text_field :first_name, :class => 'text_field' %>
          </div>
        </div>
        <div class="control-group">
          <%= f.label :last_name, :class => 'control-label' %>
          <div class="controls">
            <%= f.text_field :last_name, :class => 'text_field' %>
          </div>
        </div>
        <div class="control-group">
          <%= f.label :email, :class => 'control-label' %>
          <div class="controls">
            <%= f.text_field :email, :class => 'text_field' %>
          </div>
        </div>
        <div class="control-group">
          <%= f.label :phone1, :class => 'control-label' %>
          <div class="controls">
            <%= f.text_field :phone1, :class => 'text_field' %>
          </div>
        </div>
        <div class="control-group">
          <%= f.label :phone2, :class => 'control-label' %>
          <div class="controls">
            <%= f.text_field :phone2, :class => 'text_field' %>
          </div>
        </div>
        <div class="control-group" style="margin-bottom: 13px">
          <%= f.label :active, :class => 'control-label' %>
          <div class="controls">
            <%= f.check_box :active, :checked => true, :readonly => true, :disable => true, :class => 'text_field' %>
          </div>
        </div>
        <br />
      </div>
    </div>


    <div class="block span6">
      <a href="#address" class="block-heading" data-toggle="collapse"><%=t(:address)%></a>
      <div id="address" class="block-body collapse in">
        <br />
        <div class="control-group">
          <%= f.label :address1, :class => 'control-label' %>
          <div class="controls">
            <%= f.text_field :address1, :class => 'text_field' %>
          </div>
        </div>
        <div class="control-group">
          <%= f.label :address2, :class => 'control-label' %>
          <div class="controls">
            <%= f.text_field :address2, :class => 'text_field' %>
          </div>
        </div>
        <div class="control-group">
          <%= f.label :zip, :class => 'control-label' %>
          <div class="controls">
            <%= f.text_field :zip, :class => 'text_field' %>
          </div>
        </div>
        <div class="control-group">
          <%= f.label :city, :class => 'control-label' %>
          <div class="controls">
            <%= f.text_field :city, :class => 'text_field' %>
          </div>
        </div>
        <div class="control-group">
          <%= f.label :state, :class => 'control-label' %>
          <div class="controls">
            <%= f.text_field :state, :class => 'text_field' %>
          </div>
        </div>
        <div class="control-group">
          <%= f.label :country, :class => 'control-label' %>
          <div class="controls">
            <%= f.text_field :country, :class => 'text_field' %>
          </div>
        </div>
      </div>
    </div>
  </div>

  <%if @current_user.role.super_admin == true%>
    <div class="row-fluid">
      <div class="block span6">
        <a href="#login" class="block-heading" data-toggle="collapse"><%= t(:login_info) %></a>
        <div id="login" class="block-body collapse in">
          <br />     
          <div class="control-group">
            <%= f.label :role_id, :class => 'control-label' %>
            <div class="controls">
              <%= f.collection_select(:role_id, Role.all, :id, :name, :prompt => true)%>
            </div>
          </div>
          <div class="control-group">
            <%= f.label :branch_id, :class => 'control-label' %>
            <div class="controls">
              <%= f.collection_select(:branch_id, Branch.all, :id, :name, :prompt => true)%>
            </div>
          </div>

          <div class="control-group">
            <%= f.label :active, :class => 'control-label' %>
            <div class="controls">
              <%= f.check_box :active, :class => 'check_box' %>
            </div>
          </div>

          <div class="control-group"><%= f.label :current_password %> 
            <i>(we need your current password to confirm your changes)</i>
            <div class="controls">
              <%= f.password_field :current_password %>
            </div>
          </div>
          <br />
        </div>
      </div>

      <div class="block span6">
        <a href="#passwords" class="block-heading" data-toggle="collapse"><%=t(:passwords)%></a>
        <div id="passwords" class="block-body collapse in">
          <br />
          <div class="control-group">
            <%= f.label :username, :class => 'control-label' %>
            <div class="controls">
              <%= f.text_field :username, :class => 'text_field' %>
            </div>
          </div>
          <div class="control-group">
            <%= f.label :email, :class => 'control-label' %>
            <div class="controls">
              <%= f.text_field :email, :class => 'text_field' %>
            </div>
          </div>
          <div class="control-group">
            <%= f.label :password, :class => 'control-label' %>
            <div class="controls">
              <%= f.password_field :password, :class => 'text_field' %>
            </div>
          </div>
          <div class="control-group">
            <%= f.label :password_confirmation, :class => 'control-label' %>
            <div class="controls">
              <%= f.password_field :password_confirmation, :class => 'text_field' %>
            </div>
          </div>
        </div>
      </div>
    </div>
  <%else%>
    <div class="row-fluid">
      <div class="block span6">
        <a href="#login" class="block-heading" data-toggle="collapse"><%= t(:login_info) %></a>
        <div id="login" class="block-body collapse in">
          <br />     
          <div class="control-group">
            <%= f.label :username, :class => 'control-label' %>
            <div class="controls">
              <%= f.text_field :username, :class => 'text_field' %>
            </div>
          </div>
          <div class="control-group">
            <%= f.label :email, :class => 'control-label' %>
            <div class="controls">
              <%= f.text_field :email, :class => 'text_field' %>
            </div>
          </div>
          <div class="control-group">
            <%= f.label :role_id, :class => 'control-label' %>
            <div class="controls">
              <%= f.collection_select(:role_id, Role.where("branch_id = #{@user.branch_id} or id = 2"), :id, :name, :prompt => true)%>
            </div>
          </div>
          <br />
        </div>
      </div>

      <div class="block span6">
        <a href="#passwords" class="block-heading" data-toggle="collapse"><%=t(:passwords)%></a>
        <div id="passwords" class="block-body collapse in">
          <br />
          <div class="control-group">
            <%= f.label :password, :class => 'control-label' %>
            <div class="controls">
              <%= f.password_field :password, :class => 'text_field' %>
            </div>
          </div>
          <div class="control-group">
            <%= f.label :password_confirmation, :class => 'control-label' %>
            <div class="controls">
              <%= f.password_field :password_confirmation, :class => 'text_field' %>
            </div>
          </div>
          <div class="control-group"><%= f.label :current_password %> (we need your current password to confirm your changes)
            <div class="controls">
              <%= f.password_field :current_password %>
            </div>
          </div>
        </div>
      </div>
    </div>
  <%end%>



  <div><%= f.submit "Update", :class => 'btn btn-primary'  %></div>
<% end %>

